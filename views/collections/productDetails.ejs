<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/Ncss/bootstrap.css">


<div id="carouselExampleControls" class=" carousel slide mt-4" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="<%= product.ImagesPath%>\<%=product.mainImg%>" class="d-block w-100" alt="...">
            <!-- <img src="images/img10.png"  alt="..."> -->
        </div>

        <% for( let i=0; i < product.images.length; i++ ) { %>
            <div class="carousel-item">
                <img src="<%= product.ImagesPath%>\<%=product.images[i]%>" class="d-block w-100" alt="...">
            </div>
            <% } %>

    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
        <!-- <p class="prevBtn">&DoubleLeftArrow;</p> -->
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>


<section class="productDetails">
    
         <div class="productDetails">
            <div class="brandName"><h2><%=product.category %>, <i><%=product.brandName %></i></h2></div>
            <div><p><strong>Available:</strong> <%=product.quantity %></p></div>
            <div class="price"><h3><strong>K <%=product.price %></strong></h3></div>

                
                <hr>
                <div class="buttons">
                    <div id="buyBtn">
                        <span >buy it now</span>
                        <div class="buyMessage">
                    
                            <form action="/item/buy" method="post">
                                <!-- <p class="closeBuyMessage">&times;</p> -->
                                <input type="text" id="name" name="userName" placeholder="enter name" required>
                                <input type="email" id="email" name="userEmail" placeholder="enter email" required>
                                <input type="number" name="phoneNumber" placeholder="enter phone number" required>
                                <input type="text" name="userLocation" placeholder="enter location" required>
                                <input type="hidden" name="id" value="<%=product._id %>">
                                <input type="hidden" name="product"
                                    value="category:<%=product.category %>, brandName:<%=product.brandName %>">
                                <input type="submit" value="submit">
                            </form>
                        </div>
                    </div>
                    <div id="tradeBtn" >
                        <span>trade</span>
                    </div>
                    <div id="cartBtn" >
                        <span>add to cart</span>
                    </div>
                </div>
                
            <hr>
            <p><i><strong>Description:</strong>
                    <%=product.description %>
                </i></p>
            <p><strong>Date uploaded:</strong>
                <%= product.createdAt.toString().split('GMT')[0]%>
            </p>
         </div>
            

</section>



<style>
    
    .buyMessage{
        margin: 1%;
       right: 5%;
       padding: 2%;
       width: 80vw;
       display: none;
       justify-content: center;
       align-items: center;
       position: absolute;
       background-color: aquamarine;
       border-radius: 6px;
       box-shadow: 0px 0px 20px 0.05px;
    }
    .buyMessage input{
        border: 1px solid black;
        margin: 3%;
        border-radius: 10px;
        padding: 2% 5%;
    }
    .buyMessage .closeBuyMessage{
       font-weight: bold;
       font-size: larger;
       color: red;
    }
    .productDetails{
        padding: 5%;
        margin-top: 5%;
        margin: 0% 5%;
    }

    .brandName{
        grid-area: brandName;
    }
    .brandName p{
        font-weight: bold;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

    }
    .buttons div:first-child{
        background-color: rgb(58, 58, 237);
        color:#fff;
    }
   
    .buttons div{
        text-transform: capitalize;
        margin: 5px 0px;
        background-color: #fff;
        padding: 5%;
        border-radius: 30px;
        text-align: center;
        border: 1px solid rgb(58, 58, 237);
        color: black;
        cursor:pointer;
    }
    .buttons div span{
        width: 100%;
        font-size: large;
          font-weight: 500;
    }

    @media (max-width:799px ) {
       
    }

</style>

<script src="/js/script.js"></script>
<script>
   let checkBtn = true 
   const buyBtn = document.querySelector('#buyBtn');
   const buyMessage = document.querySelector('.buyMessage');
   const closeBuyMessage = document.querySelector('.closeBuyMessage')
   buyBtn.addEventListener('click', ()=>{
    if(checkBtn == true){
        buyMessage.style.display = 'flex';
        buyBtn.style.color = 'red';
        checkBtn = false
    }else{
        buyMessage.style.display = 'none';
        buyBtn.style.color = 'black';
        checkBtn = true
    }

   })
   closeBuyMessage.addEventListener('click', ()=>{

        buyMessage.style.display = 'none';
        buyBtn.style.color = 'black';
        checkBtn = true
   })

</script>
<script src="/Njs/bootstrap.js"></script>
